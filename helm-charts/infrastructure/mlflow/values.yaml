# MLflow Configuration
image:
  repository: ghcr.io/mlflow/mlflow
  tag: "v3.6.0"
  pullPolicy: IfNotPresent


service:
  type: ClusterIP
  port: 5000

# Resource limits
resources:
  requests:
    memory: "512Mi"
    cpu: "500m"
  limits:
    memory: "1Gi"
    cpu: "1000m"

# PostgreSQL backend
postgres:
  host: "postgres"
  port: 5432
  database: "mlflow"
  username: "mlflow"
  password: "mlflow_password_change_me"

# GCS artifact storage
gcs:
  bucket: "product-recsys-mlops-recsys-data"
  artifactPath: "mlflow-artifacts"

# Workload Identity for GCS access
serviceAccount:
  create: true
  name: mlflow-sa
  annotations:
    iam.gke.io/gcp-service-account: "mlflow-gcs@product-recsys-mlops.iam.gserviceaccount.com"

# Ingress configuration
ingress:
  enabled: false
  className: "nginx"
  host: "mlflow.recsys.internal"
  annotations: {}
